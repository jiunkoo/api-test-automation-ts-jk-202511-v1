# 테스트 케이스 목록

## 1. POST /api/v1/menu/select

| ID   | 유형 | HTTP | 시나리오 요약                                 | 왜 필요한가(목적)                                                                                | 구현 위치                       |
| ---- | ---- | ---- | --------------------------------------------- | ------------------------------------------------------------------------------------------------ | ------------------------------- |
| MS1  | PRE  | -    | `menuId`/`quantity`/`shopId`/`memberNo` 누락  | 필수값 누락 시 **서버 호출 전에** 차단되는지 확인 (클라이언트 측 사전 검증)                      | `menu-select.test.ts` 검증 섹션 |
| MS2  | PRE  | -    | `quantity` 범위/타입 위반 (0, 100, 2.5 등)    | 수량이 1~99 사이 정수인지 검증, 잘못된 값은 서버 호출 없이 에러로 처리하는지 확인                | 동일                            |
| MS3  | 200  | 200  | 정상 메뉴 예약 성공, 예약 만료 5분            | 성공 응답 구조·필드 타입이 스펙과 일치하는지, `reservationExpiresAt - timestamp = 5분` 인지 검증 | `menu-select.test.ts` 성공 섹션 |
| MS4  | 200  | 200  | 멱등 (동일키/동일바디) → 동일 `reservationId` | 동일 멱등키 + 동일 바디에 대해 **동일 예약 ID** 를 반환하는지 확인                               | 동일                            |
| MS5  | 200  | 200  | 멱등 (다른키/다른바디) → 다른 `reservationId` | 멱등키가 다르면 서로 다른 예약으로 처리되는지(충돌 없음) 확인                                    | 동일                            |
| MS6  | 400  | 400  | `Content-Type` 오류 (`x-www-form-urlencoded`) | JSON이 아닌 포맷으로 올 경우 400과 표준 에러 응답을 반환하는지 확인                              | `menu-select.test.ts` 실패 섹션 |
| MS7  | 401  | 401  | 토큰 누락                                     | 인증 토큰이 없을 때 `UNAUTHORIZED` 정책(코드/메시지)이 일관적인지 검증                           | 동일                            |
| MS8  | 401  | 401  | 토큰 만료                                     | 만료된 토큰에도 동일한 `UNAUTHORIZED` 정책이 적용되는지 확인                                     | 동일                            |
| MS9  | 403  | 403  | 권한 부족                                     | 권한이 없을 때 `FORBIDDEN` 응답·메시지 규칙이 지켜지는지 검사                                    | 동일                            |
| MS10 | 404  | 404  | 존재하지 않는 메뉴                            | 리소스 미존재 시 404 및 스펙에 정의된 에러코드를 반환하는지 확인                                 | 동일                            |
| MS11 | 409  | 409  | 재료 부족 (`INSUFFICIENT_INGREDIENTS`)        | 재료 부족이라는 도메인 비즈니스 에러를 표준 포맷으로 응답하는지 검증                             | 동일                            |
| MS12 | 409  | 409  | 멱등 (동일키/다른바디) → `IDEMP_CONFLICT`     | 멱등키가 같고 바디가 다를 때 정책적으로 충돌을 발생시키는지 확인                                 | 동일                            |
| MS13 | 429  | 429  | 요청 한도 초과 (Rate Limit, `Retry-After=60`) | 레이트 리밋 초과 시 429와 `Retry-After` 헤더를 통해 재시도 정책을 전달하는지 검증                | 동일                            |
| MS14 | ERR  | -    | 요청 타임아웃 (`ECONNABORTED`)                | 클라이언트 타임아웃이 AxiosError 형태로 처리되는지, 코드(`ECONNABORTED`)가 유지되는지 확인       | 동일                            |
| MS15 | ERR  | -    | 네트워크 오류 (`ENETUNREACH`)                 | 네트워크 단절 시 에러 코드·메시지가 적절히 노출되는지 확인                                       | 동일                            |

---

## 2. POST /api/v1/order/create

| ID   | 유형 | HTTP | 시나리오 요약                                 | 왜 필요한가(목적)                                                                              | 구현 위치                        |
| ---- | ---- | ---- | --------------------------------------------- | ---------------------------------------------------------------------------------------------- | -------------------------------- |
| OC1  | PRE  | -    | `reservationId` 누락                          | 주문 생성 전에 **예약 ID 필수** 조건이 클라이언트에서 강제되는지 확인                          | `order-create.test.ts` 검증 섹션 |
| OC2  | PRE  | -    | `memberNo` 누락                               | 회원번호 필수 조건이 서버 전에 검증되는지 확인                                                 | 동일                             |
| OC3  | 200  | 200  | 단일 주문 생성 성공                           | 주문 생성 성공 시 `orderNo` 형식(8자리 영숫자), `createdAt` 타임스탬프 범위 등을 스펙대로 검증 | `order-create.test.ts` 성공 섹션 |
| OC4  | 200  | 200  | `menu-select → order-create` 연속 호출        | 메뉴 예약에서 받은 `reservationId` 를 그대로 주문 생성에 사용했을 때 연계가 올바른지 검증      | 동일                             |
| OC5  | 200  | 200  | 멱등 (동일키/동일바디) → 동일 `orderNo`       | 동일 멱등키 + 동일 바디에 대해 **동일 주문번호** 를 반환하는지 확인                            | 동일                             |
| OC6  | 400  | 400  | `Content-Type` 오류 (`x-www-form-urlencoded`) | JSON이 아닌 포맷으로 올 경우 400 + 표준 에러 응답을 반환하는지 확인                            | `order-create.test.ts` 실패 섹션 |
| OC7  | 401  | 401  | 토큰 누락                                     | 인증 토큰 누락 시 `UNAUTHORIZED` 정책(코드/메시지)이 스펙과 일치하는지 검증                    | 동일                             |
| OC8  | 401  | 401  | 토큰 만료                                     | 토큰 만료도 401 `UNAUTHORIZED` 정책을 따르는지 확인                                            | 동일                             |
| OC9  | 403  | 403  | 권한 부족                                     | 권한 부족 시 `FORBIDDEN` 에러 정책 확인                                                        | 동일                             |
| OC10 | 422  | 422  | 예약 만료(5분 초과)                           | 예약이 설정된 유효시간(5분)을 초과했을 때 적절히 422로 처리되는지 검증                         | 동일                             |
| OC11 | 404  | 404  | 유효하지 않은 예약                            | 존재하지 않는 `reservationId` 에 대한 404 및 에러코드 검증                                     | 동일                             |
| OC12 | 409  | 409  | 예약 후 재료 소진 (`INGREDIENTS_EXHAUSTED`)   | 예약 후 재료 소진이라는 도메인 비즈니스 에러를 표준 포맷으로 응답하는지 확인                   | 동일                             |
| OC13 | 409  | 409  | 중복 주문 (`reservationId` 재사용)            | 동일 예약 ID로 반복 주문 시 중복 주문 방지 정책이 올바르게 동작하는지 확인                     | 동일                             |
| OC14 | 409  | 409  | 멱등 (동일키/다른바디) → `IDEMP_CONFLICT`     | 멱등키는 같지만 바디가 다를 때 정책적으로 충돌을 발생시키는지 검증                             | 동일                             |
| OC15 | 429  | 429  | 요청 한도 초과 (Rate Limit, `Retry-After=60`) | 레이트 리밋 초과 시 429와 `Retry-After` 헤더로 재시도 지침이 내려오는지 확인                   | 동일                             |
| OC16 | ERR  | -    | 요청 타임아웃 (`ECONNABORTED`)                | 주문 생성 요청 타임아웃이 AxiosError로 표준화되어 처리되는지 확인                              | 동일                             |
| OC17 | ERR  | -    | 네트워크 오류 (`ENETUNREACH`)                 | 네트워크 단절 시 에러 코드·메시지가 적절히 노출되는지 확인                                     | 동일                             |

---
