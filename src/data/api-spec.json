{
  "POST_/api/v1/menu/select": {
    "description": "메뉴 선택 API",
    "restfulMethod": "POST",
    "restfulUrl": "/api/v1/menu/select",

    "requestHeaders": {
      "order": ["Authorization", "Content-Type"],
      "byName": {
        "Authorization": {
          "required": true,
          "description": "Bearer {ACCESS_TOKEN} (필수)"
        },
        "Content-Type": {
          "required": false,
          "const": "application/json;charset=UTF-8",
          "description": "POST 본문 있을 때 자동 설정"
        }
      }
    },

    "requestBodySchema": {
      "type": "object",
      "additionalProperties": false,
      "required": ["menuId", "quantity", "shopId", "memberNo"],
      "properties": {
        "menuId": { "type": "string", "description": "메뉴 ID" },
        "quantity": {
          "type": "integer",
          "minimum": 1,
          "maximum": 99,
          "description": "주문 수량"
        },
        "shopId": { "type": "string", "description": "가게 ID" },
        "memberNo": { "type": "string", "description": "회원번호" }
      },
      "example": {
        "menuId": "menu_001",
        "quantity": 2,
        "shopId": "shop_001",
        "memberNo": "member_123"
      }
    },

    "responseBodySchema": {
      "type": "object",
      "additionalProperties": false,
      "required": ["status", "message", "timestamp"],
      "properties": {
        "status": { "type": "string", "enum": ["SUCCESS", "ERROR"] },
        "message": { "type": "string" },
        "timestamp": { "type": "string", "format": "date-time" },
        "data": {
          "type": "object",
          "additionalProperties": false,
          "required": [
            "reservationId",
            "reservationExpiresAt",
            "menuId",
            "quantity"
          ],
          "properties": {
            "reservationId": {
              "type": "string",
              "description": "메뉴 예약 ID"
            },
            "reservationExpiresAt": {
              "type": "string",
              "format": "date-time",
              "description": "예약 만료 시간 (RFC3339, timestamp로부터 5분 유효)"
            },
            "menuId": { "type": "string" },
            "quantity": { "type": "integer" }
          }
        }
      },
      "examples": {
        "success": {
          "status": "SUCCESS",
          "message": "메뉴 예약이 완료되었습니다",
          "timestamp": "2025-08-07T12:30:00.123Z",
          "data": {
            "reservationId": "RSV_A7K9M2X8",
            "reservationExpiresAt": "2025-08-07T12:35:00.123Z",
            "menuId": "menu_001",
            "quantity": 2
          }
        },
        "failure": {
          "status": "ERROR",
          "message": "주문하신 수량만큼 재료가 부족합니다",
          "errorCode": "INSUFFICIENT_INGREDIENTS",
          "timestamp": "2025-08-07T12:30:00.123Z"
        }
      }
    },
    "errorCodes": [
      {
        "ErrorCode": "INVALID_REQUEST",
        "HttpStatus": 400,
        "Description": "잘못된 요청"
      },
      {
        "ErrorCode": "UNAUTHORIZED",
        "HttpStatus": 401,
        "Description": "인증 실패"
      },
      {
        "ErrorCode": "FORBIDDEN",
        "HttpStatus": 403,
        "Description": "권한 부족"
      },
      {
        "ErrorCode": "MENU_NOT_FOUND",
        "HttpStatus": 404,
        "Description": "존재하지 않는 메뉴"
      },
      {
        "ErrorCode": "INSUFFICIENT_INGREDIENTS",
        "HttpStatus": 409,
        "Description": "재료 부족"
      },
      {
        "ErrorCode": "IDEMP_CONFLICT",
        "HttpStatus": 409,
        "Description": "Idempotency-Key 충돌"
      },
      {
        "ErrorCode": "RATE_LIMIT_EXCEEDED",
        "HttpStatus": 429,
        "Description": "요청 한도 초과"
      }
    ]
  },
  "POST_/api/v1/order/create": {
    "description": "주문 생성 API",
    "restfulMethod": "POST",
    "restfulUrl": "/api/v1/order/create",
    "requestHeaders": {
      "order": ["Authorization", "Content-Type"],
      "byName": {
        "Authorization": {
          "required": true,
          "description": "Bearer {ACCESS_TOKEN} (필수)"
        },
        "Content-Type": {
          "required": false,
          "const": "application/json;charset=UTF-8",
          "description": "POST 본문 있을 때 자동 설정"
        }
      }
    },
    "requestBodySchema": {
      "type": "object",
      "additionalProperties": false,
      "required": ["reservationId", "memberNo"],
      "properties": {
        "reservationId": {
          "type": "string",
          "description": "메뉴선택에서 받은 예약 ID"
        },
        "memberNo": { "type": "string", "description": "회원번호" }
      },
      "example": {
        "reservationId": "RSV_A7K9M2X8",
        "memberNo": "member_123"
      }
    },
    "responseBodySchema": {
      "type": "object",
      "additionalProperties": false,
      "required": ["status", "message", "timestamp", "data"],
      "properties": {
        "status": { "type": "string", "enum": ["SUCCESS", "ERROR"] },
        "message": { "type": "string" },
        "timestamp": { "type": "string", "format": "date-time" },
        "data": {
          "type": "object",
          "additionalProperties": false,
          "required": [
            "orderNo",
            "orderStatus",
            "reservationId",
            "createdAt",
            "memberInfo"
          ],
          "properties": {
            "orderNo": {
              "type": "string",
              "description": "주문 번호 (8자리 영숫자)",
              "pattern": "^[A-Z0-9]{8}$"
            },
            "orderStatus": { "type": "string", "enum": ["INITIALIZING"] },
            "reservationId": { "type": "string" },
            "createdAt": { "type": "string", "format": "date-time" },
            "memberInfo": {
              "type": "object",
              "additionalProperties": false,
              "required": ["memberNo"],
              "properties": {
                "memberNo": { "type": "string" }
              }
            }
          }
        }
      },
      "examples": {
        "success": {
          "status": "SUCCESS",
          "message": "주문이 성공적으로 생성되었습니다",
          "timestamp": "2025-08-07T12:30:00.123Z",
          "data": {
            "orderNo": "R7X9K2M8",
            "orderStatus": "INITIALIZING",
            "reservationId": "RSV_A7K9M2X8",
            "createdAt": "2025-08-07T12:30:00.123Z",
            "memberInfo": { "memberNo": "member_123" }
          }
        },
        "failure": {
          "status": "ERROR",
          "message": "예약 후 재료가 소진되었습니다",
          "errorCode": "INGREDIENTS_EXHAUSTED",
          "timestamp": "2025-08-07T12:35:00.123Z"
        }
      }
    },
    "errorCodes": [
      {
        "ErrorCode": "INVALID_REQUEST",
        "HttpStatus": 400,
        "Description": "잘못된 요청"
      },
      {
        "ErrorCode": "UNAUTHORIZED",
        "HttpStatus": 401,
        "Description": "인증 실패"
      },
      {
        "ErrorCode": "FORBIDDEN",
        "HttpStatus": 403,
        "Description": "권한 부족"
      },
      {
        "ErrorCode": "INVALID_RESERVATION",
        "HttpStatus": 404,
        "Description": "유효하지 않은 예약"
      },
      {
        "ErrorCode": "INGREDIENTS_EXHAUSTED",
        "HttpStatus": 409,
        "Description": "예약 후 재료 소진"
      },
      {
        "ErrorCode": "DUPLICATE_ORDER",
        "HttpStatus": 409,
        "Description": "중복 주문"
      },
      {
        "ErrorCode": "IDEMP_CONFLICT",
        "HttpStatus": 409,
        "Description": "Idempotency-Key 충돌 (동일 키 + 다른 바디)"
      },
      {
        "ErrorCode": "RESERVATION_EXPIRED",
        "HttpStatus": 422,
        "Description": "예약 만료 (5분 초과)"
      },
      {
        "ErrorCode": "RATE_LIMIT_EXCEEDED",
        "HttpStatus": 429,
        "Description": "요청 한도 초과"
      }
    ]
  }
}
